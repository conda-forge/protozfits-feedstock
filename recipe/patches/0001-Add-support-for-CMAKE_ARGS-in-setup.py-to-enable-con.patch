From a50800150eae41bd08869540252ca1a139259037 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Maximilian=20N=C3=B6the?= <maximilian.noethe@tu-dortmund.de>
Date: Sat, 15 Jan 2022 12:39:17 +0100
Subject: [PATCH 1/4] Add support for CMAKE_ARGS in setup.py to enable conda
 forge macos arm64 build

---
 setup.py | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/setup.py b/setup.py
index 9f00aa6..6f06411 100644
--- a/setup.py
+++ b/setup.py
@@ -6,6 +6,7 @@ import pathlib
 import subprocess as sp
 import re
 import warnings
+import shlex
 
 from setuptools import setup, Extension, find_packages
 from setuptools.command.build_ext import build_ext
@@ -87,8 +88,10 @@ class build_ext_cmake(build_ext):
             sysconfig.get_config_var('LIBDIR'),
             sysconfig.get_config_var('INSTSONAME'),
         )
+        cmake_args = shlex.split(os.getenv("CMAKE_ARGS", ""))
         cmake_call = [
             cmake,
+            *cmake_args,
             str(ext.source_dir),
             '-DCMAKE_BUILD_TYPE=' + cfg,
             '-DPYTHON=ON',
